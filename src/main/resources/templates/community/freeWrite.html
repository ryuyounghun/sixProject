<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>자유게시판 글쓰기</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

</head>
<body >

	<form action = "freeWrite" method = "POST" onsubmit = "return checkValues();" enctype = "multipart/form-data">
		<table>
			<tr>
				<td>
					<select id="categorychoice" name="category" >
						<option value="잡담">잡담</option>
						<option value="b">뭘</option>
						<option value="c">넣</option>
						<option value="d">을</option>
						<option value="e">까</option>
					</select>	
				</td>
				<th>
					제목: <input type="text" name="title">
				</th>
			</tr>
			<tr>
				<td colspan="2">
					<input type="text" name="content">
				</td>
			</tr>
			<tr colspan="3">
				<td>
					<input type="submit" value = "제출">
				</td>
			</tr>
			<tr>
				<th>파일</th>
				<td>
					<div name="fileDiv">
						<div >
							<label for="file_0" >찾아보기</label>
							<input type="file" name="files" id="file_0" />
	
							<button type="button" onclick="addFile()" >
								+
							</button>
							<button type="button" onclick="removeFile(this)" >
								-
							</button>
						</div>
					</div>
				</td>
				<td id="fileboxForPlusFile"></td>
			</tr>
		</table>
	</form>
	
	
</body>
<script >

let fileIdx = 0; /*[- 파일 인덱스 처리용 전역 변수 -]*/
function addFile() {

	/* 
	const fileDivs = $('.fileDiv');
	if (fileDivs.length > 2) {
		alert('파일은 최대 세 개까지 업로드 할 수 있습니다.');
		return false;
	}
	*/

	fileIdx++;
	let fileHtml = `
			<td>
				<div name="fileDiv">
					<label for="file_${fileIdx}"></label>
					<div>
						<input type="text" value="파일 찾기" readonly />
						<label for="file_${fileIdx}" >찾아보기</label>
						<input type="file" name="files" id="file_${fileIdx}"/>
						<button type="button" onclick="addFile()" >
							+
						</button>
						<button type="button" onclick="removeFile(this)" >
							-
						</button>
					</div>
				</div>
			</td>
	`;
	
	$('#fileboxForPlusFile').before(fileHtml);

}

function checkValues(){
	let title = document.getElementById('title');
	let content = document.getElementById('content');

	if ( title.value.trim().length == 0){
		alert('제목을 입력해 주세요.');
		title.focus();
		return false;
	
	}
	if ( content.value.trim().length == 0){
		alert('내용을 입력해 주세요.');
		content.focus();
		return false;
	}
}
</script>
</html>