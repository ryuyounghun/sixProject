<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

	<div class="searchBar-wrapper">
		<form th:action="@{freeIndex}" method="get" id="pagingForm">
			<input type="hidden" id="page" name="page" value="">
		</form>
	</div>
	
	<div class="infinite">
		<div class="list">
			<table>
				<tr>
					<th colspan="2">작성자</th>
					<th>제목</th>
					<th>작성일</th>
					<th>조회수</th>
				</tr>
				<tr th:each="list : ${fbList}">
					<td th:text="${list.memberLevel}" th:value="${list.memberLevel}" class="memberLevel"></td>
					<td th:text="${list.nickname}"></td>
					<td>
						<a th:href="@{|fbRead?num=${list.boardNum}|}">
							<span th:text="${list.title}"
							style="display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 13ch;">
							</span>
						</a>
					</td>
					<td th:text="${list.inputdate}"></td>
					<td th:text="${list.viewCount}"></td>
				</tr>
			</table>
			<input type="button" value="글쓰기" class="write-btn" onclick="javascript:location.href='freeWrite'">
		</div>
	</div>
	<div id="navigator">
		<!-- 페이지 이동 링크 -->
		<!-- 이전 그룹으로 이동 -->
		<a th:href = "|javascript:pagingFormSubmit(${navi.currentPage - navi.pagePerGroup})|" th:text ="|◁◁|"></a>
		<a th:href = "|javascript:pagingFormSubmit(${navi.currentPage - 1})|" th:text ="|◀|" id="prevPage"></a>
		<!-- 다음 그룹으로 이동 -->
		<span th:each="counter : ${#numbers.sequence(navi.startPageGroup, navi.endPageGroup)}">
			<th:block th:if = "${counter == navi.currentPage}"><b>
				<a th:text ="${counter}" th:href = "|javascript:pagingFormSubmit(${counter})|"></a>
			</th:block>
			<th:block th:if = "${counter == navi.currentPage}"></b></th:block>
		</span>
		<!-- 다음페이지 그룹으로 이동 -->
		<a th:href = "|javascript:pagingFormSubmit(${navi.currentPage + 1})|" th:text ="|▶|"  id="nextPage"></a>
		<a th:href = "|javascript:pagingFormSubmit(${navi.currentPage + navi.pagePerGroup})|" th:text ="|▷▷|"></a>
		<!-- 다음 그룹으로 이동 -->
	</div>
	
	
	<script type="text/javascript">
		function pagingFormSubmit(currentPage){
			let form = document.getElementById("pagingForm");
			let page = document.getElementById("page");
			
			
			page.value = currentPage;
			form.submit();
		}
	</script>
</body>

</html>