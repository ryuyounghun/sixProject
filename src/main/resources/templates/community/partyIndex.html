<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="/css/community/communityIndex.css">
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<style>
	table {
		width:150px;
		border : 1px solid black;
		margin : 30px;
	}
</style>

<script>
	$(document).ready(function() {
		partyBox();
	});
	
	function partyBox() {
		
		$.ajax({
			url : "setPartBox",
			type : "get",
			success : function(data) {
				console.log(data);
				
				let htmlStr = "";
				
				$.each(data, function(index, item) {
					htmlStr += "<table><tr>";
					htmlStr += "<th>" + item.title + "</th></tr>"; 
					htmlStr += "<tr><th>" + item.totalMember + "</tr></th>";
					htmlStr += "<tr><th>" + item.destination + "</tr></th>";
					htmlStr += "<tr><th><input type='button' value='자세히보기' onclick='read(" + item.classNum + ")'></tr></th>";
					htmlStr += "</table>";
				});
				
				$("#partyBox").html(htmlStr);
			}
		});
	}
	
	
	function read(classNum) {
		location.href="read?num=" + classNum;
	}
</script>
</head>
<body>
	<div id="headerAndSection-wrapper">
		<header>
			<div class="header-container">
				<a href="/" class="header-logo"> asdxx </a> <a
					th:href="@{/delivery/index}" class="header-toAnother"> 배달로~qwe
				</a>
				<ui class="header-logMenuList"> <!-- 로그인 및 로그아웃 링크 -->
				<li sec:authorize="not isAuthenticated"><a
					th:href="@{/member/login}"> 로그인 </a></li>
				<li sec:authorize="not isAuthenticated"><a
					th:href="@{/member/join}"> 회원가입 </a></li>
				<li sec:authorize="isAuthenticated"><a th:href="@{/logout}">
						로그아웃 </a></li>
				<li sec:authorize="isAuthenticated"><a
					th:href="@{/member/mypage}"> 회원정보 </a></li>
				</ui>

			</div>
		</header>

		<section>
			<div class="section-container">

				<div class="searchBar-wrapper">
					<div class="container-searchBar">
						<input class="searchBar" type="text" name="searchWord"
							th:value="${searchWord}" id="searchWord" placeholder="메뉴검색">
						검색
					</div>
				</div>


				<aside>
					<div class="aside-left">
						<ul>
							<li>카</li>
							<li>테</li>
							<li>고</li>
							<li>리</li>
						</ul>
					</div>
				</aside>

				<aside>
					<div class="aside-right">
						<!-- 실시간 키워드(aJax)  -->
						<div id="">실시간 키워드(aJax)</div>
					</div>
				</aside>

				<div class="aside-center">
					<div class="section-center">
						<div id="partyBox"></div>
					
					</div>
				</div>
				
				
			</div>
		</section>

	</div>

	<footer> </footer>
</body>
</html>