<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>가게등록</title>
<link rel="stylesheet" href="/css/delivery/input.css">
</head>
<body>
<div id="headerAndSection-wrapper">
		<header>
			<div class="header-container">
				<a href="/" class="header-logo" >
					asd
				</a>
				<a th:href="@{/community/index}" class="header-toAnother" >
					커뮤니티로~
				</a>
				<ui class="header-logMenuList"> <!-- 로그인 및 로그아웃 링크 -->
					<li sec:authorize ="not isAuthenticated">
						<a th:href="@{/member/login}">
							로그인
						</a>
					</li>
					<li sec:authorize="not isAuthenticated">
						<a th:href ="@{/member/join}">
							회원가입
						</a>
					</li>
					<li sec:authorize="isAuthenticated">
						<a th:href ="@{/logout}">
							로그아웃
						</a>
					</li>
					<li sec:authorize="isAuthenticated">
						<a th:href ="@{/member/mypage}">
							회원정보
						</a>
					</li>
				</ui>

			</div>
		</header>
	
	<section>
			<div class="section-container">
				
				<aside>
					<div class="aside-left">

					</div>
				</aside>
				
				<aside>
					<div class="aside-right">

					</div>
				</aside>

				<div class="aside-center">
					<div class="section-center">
						
						<form action="inputStore" method="post" enctype="multipart/form-data">
							<!-- 상품등록 기본정보 -->
							<fieldset class = "requiredInfo">
								<legend>가게정보</legend>
									<!-- 가게 이름 -->
									
									<label for = "joinStore">상호명</label><br>
									<div class = "joinIdWrap">
				        				<input type = "text" name="storeName" id = "joinStore" placeholder = "상호명을 입력해주세요" required>
				        				<select id="change" onchange="selectBoxChange(this.value);">
				        					<option>선택</option>
				        					<option value="1">한식</option>
				        					<option value="2">중식</option>
				        					<option value="3">일식</option>
				        					<option value="4">양식</option>
				        					<option value="5">디저트</option>
				        					<option value="6">야식</option>
				        					<option value="7">도시락</option>
				        				</select>
				        				<input type="hidden" value="" id="hiddenNum" name="category">
				        			</div>
									
									<!-- 전화번호 -->
									<label for = "phone">전화번호</label><br>
			        				<input type = "text" id = "phone" name = "phone" placeholder = "전화번호를 입력해주세요" required>
									
									<!-- 가게 설명 -->
				        			<br><label for = "content">가게 설명</label><br>
				        			<textarea id = "content" name = "storeContent" placeholder = "가게에 대한 설명을 적어주세요."></textarea>
				        			
				        			<!-- 가게 썸네일 -->
				        			<br><label for = "content">가게 썸네일</label><br>
				        			<input type="file" name="file">
				        			
							</fieldset>
							
							<fieldset class = "optionalInfo">
								<legend>주소 등록</legend>
								
								<!-- 주소 -->
			        			<input type = "text" id = "sample4_roadAddress" class = "address1" name = "address" placeholder = "주소찾기를 눌러주세요" readonly>
			        			<input type = "button" value = "주소찾기" class = "addressFind" onclick="sample4_execDaumPostcode()">
								<br><input type = "text" class = "address1" id="sample4_detailAddress" placeholder = "상세 주소를 입력해주세요">
							
			        			<input type="hidden" id="sample4_postcode" placeholder="우편번호">
								<input type="hidden" id="sample4_jibunAddress" placeholder="지번주소">
								<span id="guide" style="color:#999;display:none"></span>
								<input type="hidden" id="sample4_extraAddress" placeholder="참고항목">
								
							</fieldset>
									
							
							<!-- 버튼 -->
							<fieldset class = "buttons">
								<legend>확인</legend>
								<button type = "submit">등록하기</button>
								<button type = "reset">취소하기</button>
							</fieldset>
						
						</form>
					
					
					</div>
				</div>	
			</div>		
		
		</section>

	</div>

	<footer>
		
	</footer>
	
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>

	var selectBoxChange = function(value) {
		let va = document.getElementById("hiddenNum").value = value;
	}
	
    function sample4_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {

            	var roadAddr = data.roadAddress; // 도로명 주소 변수
                var extraRoadAddr = ''; // 참고 항목 변수

                if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                    extraRoadAddr += data.bname;
                }
                if(data.buildingName !== '' && data.apartment === 'Y'){
                   extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }
                if(extraRoadAddr !== ''){
                    extraRoadAddr = ' (' + extraRoadAddr + ')';
                }

                document.getElementById('sample4_postcode').value = data.zonecode;
                document.getElementById("sample4_roadAddress").value = roadAddr;
                document.getElementById("sample4_jibunAddress").value = data.jibunAddress;
                
                if(roadAddr !== ''){
                    document.getElementById("sample4_extraAddress").value = extraRoadAddr;
                } else {
                    document.getElementById("sample4_extraAddress").value = '';
                }

                var guideTextBox = document.getElementById("guide");
                if(data.autoRoadAddress) {
                    var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                    guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')';
                    guideTextBox.style.display = 'block';

                } else if(data.autoJibunAddress) {
                    var expJibunAddr = data.autoJibunAddress;
                    guideTextBox.innerHTML = '(예상 지번 주소 : ' + expJibunAddr + ')';
                    guideTextBox.style.display = 'block';
                } else {
                    guideTextBox.innerHTML = '';
                    guideTextBox.style.display = 'none';
                }
            }
        }).open();
		
    }
</script>
</body>
</html>